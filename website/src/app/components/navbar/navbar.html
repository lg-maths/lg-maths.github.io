<div class="navbar-container" [class.collapsed]="isCollapsed">
  @if (isCollapsed) {
    <!-- Collapsed state: just the menu button -->
    <div class="navbar-pill collapsed">
      <button
        (click)="toggleCollapse()"
        title="Expand menu"
        aria-label="Expand menu"
        class="menu-button">
        <span class="menu-icon">ğŸ½ï¸</span>
      </button>
    </div>
  } @else {
    <!-- Expanded state: full navbar -->
    <div class="navbar-pill">
      <!-- First row: Title (small) -->
      <div class="navbar-row title-row">
        @if (pageTitle) {
          <span class="lesson-title">{{ pageTitle }}</span>
        }
      </div>

      <!-- Second row: Home button, navigation buttons, and menu button -->
      <div class="navbar-row nav-row">
        <button
          (click)="navigateToHome()"
          title="Go to homepage"
          aria-label="Go to homepage"
          class="home-button">
          <span class="home-icon">ğŸ </span>
        </button>

        @if (pageTitle) {
          <div class="nav-buttons">
            <button
              (click)="scrollToSection($event, 'cours')"
              [class.active]="activeSection === 'cours'"
              class="nav-button">
              Cours
            </button>
            <button
              (click)="scrollToSection($event, 'exercices')"
              [class.active]="activeSection === 'exercices'"
              class="nav-button">
              Exercices
            </button>
          </div>
        }

        <!-- Menu button for manual collapse -->
        <button
          (click)="toggleCollapse()"
          title="Collapse menu"
          aria-label="Collapse menu"
          class="menu-button">
          <span class="menu-icon">ğŸ½ï¸</span>
        </button>
      </div>
    </div>
  }
</div>